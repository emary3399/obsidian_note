
### 一、子查询（Subquery）

#### 1. 定义

子查询是**嵌套在另一个查询内部的查询**，可以出现在 `SELECT`、`FROM`、`WHERE`、`HAVING` 或 `ORDER BY` 子句中。

#### 2. 特点

- 可以返回 ​**单行单列**、**多行单列**​ 或 ​**多行多列**​ 的结果
- 必须用括号 `()` 包裹
- 执行顺序：​**先执行子查询，再执行外部查询**​

#### 3. 常见用法

sql

复制

```sql
-- 1. WHERE 子句中的子查询（返回单列）
SELECT * FROM products 
WHERE price > (SELECT AVG(price) FROM products);

-- 2. FROM 子句中的子查询（返回多列，作为临时表）
SELECT a.category, a.avg_price 
FROM (SELECT category, AVG(price) AS avg_price FROM products GROUP BY category) a;

-- 3. IN/NOT IN 子查询（返回多行单列）
SELECT * FROM employees 
WHERE department_id IN (SELECT id FROM departments WHERE location = '北京');
```
