`BIT(M)` 是 MySQL 里一个不太常用、但**在特定场景下非常高效的字段类型**。它适合你需要存储**固定长度的二进制位（bit）**时使用，比如权限控制、状态标记、多种布尔值合并成一列等。

---

## 🎯 一句话定义：

> **`BIT(M)` 表示“用 M 位（二进制位）来存储数据”，其中 M 最大是 64。**

比如：`BIT(3)` 就表示你要存 **3 个二进制位（bit）**，也就是最多能表示 `000` 到 `111`，即十进制 `0~7`。

---

## 🧠 用在哪里？（实战场景）

### 场景一：用户权限（比 `SET` 更节省空间）

假设你有如下权限：

|权限项|说明|
|---|---|
|1|读|
|2|写|
|4|删除|
|8|管理|

那么用户权限就可以用 `BIT(4)` 存，比如：

- `1011` → 拥有 读、写、管理 权限
    
- `0100` → 只拥有 删除 权限
    

比字符串、`SET` 更省空间，查询也更快。

---

### 场景二：多状态合并为一个字段（比如订单状态 + 标记 + 是否隐藏）

将多个布尔标志合并成一列，避免表结构过于复杂。

---

### 场景三：位运算比较、筛选数据（高性能）

比如查出拥有“写权限”的用户：

```sql
SELECT * FROM users WHERE permissions & b'0010';
```

---

## ✅ 优点总结

|优点|说明|
|---|---|
|✅ 空间极省|一个 BIT 最多用 1 位，不像 TINYINT 至少是 1 字节|
|✅ 支持位运算|可用 `&|
|✅ 可表达复杂权限、状态|将多个 bool 合并成一列|
|✅ 性能好|查询、筛选快，存储紧凑|

---

## ⚠️ 注意事项（这些坑要避免）

|问题|说明|
|---|---|
|⛔ 插入和查询要转格式|不支持直接写字符串或数字，要用 `b'101'` 或十进制转化|
|⛔ 不支持直接显示为二进制|查询结果显示为乱码（因为是原始二进制），需转十进制或用 `BIN()`|
|⛔ 使用复杂|不适合非技术人员直接操作的系统|
|⛔ 不直观|可读性差，不如 SET 或 ENUM 好懂|

---

## 🧪 示例（创建 + 插入 + 查询）

```sql
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50),
    permissions BIT(4)  -- 4 个权限位
);
```

插入：

```sql
INSERT INTO users (name, permissions) VALUES ('张三', b'1011');  -- 读、写、管理
INSERT INTO users (name, permissions) VALUES ('李四', b'0100');  -- 删除
```

查询（找拥有“写”权限的用户）：

```sql
SELECT name, BIN(permissions) FROM users WHERE permissions & b'0010';
```

---

## 🎁 类型转换小技巧

|转换|用法|
|---|---|
|`BIN(permissions)`|转为二进制字符串显示|
|`permissions & b'0010'`|判断是否包含某个权限|
|`CAST(permissions AS UNSIGNED)`|把 `BIT` 值转成十进制整数|

---

## 🧠 总结口诀：

> **“布尔压缩选 BIT，权限多位搞定它；查询高效需位运算，展示记得转格式。”**

---

